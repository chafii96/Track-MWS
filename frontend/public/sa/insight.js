!function(){var w=window,d=document,cs=d.currentScript||function(){var s=d.getElementsByTagName("script");return s[s.length-1]}(),sid=cs&&cs.getAttribute&&cs.getAttribute("data-site")||"";if(!sid||!w||!d)return;var LS=w.localStorage,SS=w.sessionStorage,st=30;try{st=parseInt(cs.getAttribute("data-session")||"30",10)||30}catch(e){}function b64(a){for(var s="",i=0;i<a.length;i++)s+=String.fromCharCode(a[i]);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""րանց)}function rid(n){var a=new Uint8Array(n);(w.crypto||w.msCrypto).getRandomValues(a);return btoa(String.fromCharCode.apply(null,a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""}function gk(p){return"sa_"+p+"_"+sid}function gvid(){var k=gk("vid"),v="";try{v=LS.getItem(k)||""}catch(e){}if(!v){v=rid(16);try{LS.setItem(k,v)}catch(e){}}return v}function gsess(){var k=gk("sess"),lk=gk("last"),now=Date.now(),last=0;try{last=parseInt(SS.getItem(lk)||"0",10)||0}catch(e){}var ttl=st*60*1e3,s="";try{s=SS.getItem(k)||""}catch(e){}if(!s||!last||now-last>ttl){s=rid(12);try{SS.setItem(k,s)}catch(e){}}try{SS.setItem(lk,String(now))}catch(e){}return s}function dev(){var ua=navigator.userAgent||"";return/iPad|Tablet/.test(ua)?"tablet":/Mobile|Android|iP(hone|od)/.test(ua)?"mobile":"desktop"}function os(){var ua=navigator.userAgent||"";return/Windows/.test(ua)?"Windows":/Mac OS X/.test(ua)&&!/iPhone|iPad/.test(ua)?"macOS":/Android/.test(ua)?"Android":/iPhone|iPad|iPod/.test(ua)?"iOS":/Linux/.test(ua)?"Linux":"Other"}function br(){var ua=navigator.userAgent||"";return/Edg\//.test(ua)?"Edge":/Chrome\//.test(ua)&&!/Edg\//.test(ua)?"Chrome":/Firefox\//.test(ua)?"Firefox":/Safari\//.test(ua)&&!/Chrome\//.test(ua)?"Safari":"Other"}function tz(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(e){return""}}function reg(tzv){var p=(tzv||"").split("/");return p.length>1?p[0]:""}function chan(ref){try{if(!ref)return"Direct";var u=new URL(ref),h=u.hostname||"";return/(google\.|bing\.|duckduckgo\.)/.test(h)?"Search":/(facebook\.|twitter\.|x\.com|t\.co|instagram\.|linkedin\.|tiktok\.)/.test(h)?"Social":"Referral"}catch(e){return ref?"Referral":"Direct"}}function utm(){var o={};try{var p=new URLSearchParams(w.location.search);"utm_source utm_medium utm_campaign utm_term utm_content".split(" ").forEach(function(k){var v=p.get(k);v&&(o[k]=v)})}catch(e){}return o}
var vid=gvid(),sess=gsess(),hitId="",scrollMax=0,qk=gk("q");function loadQ(){try{return JSON.parse(SS.getItem(qk)||"[]")||[]}catch(e){return[]}}function saveQ(q){try{SS.setItem(qk,JSON.stringify(q.slice(-50)))}catch(e){}}function post(msg){try{if(!navigator.serviceWorker)return!1;var c=navigator.serviceWorker.controller;if(c){c.postMessage(msg);return!0}return navigator.serviceWorker.getRegistration&&navigator.serviceWorker.getRegistration("/").then(function(r){if(r&&r.active){r.active.postMessage(msg);return!0}return!1})}catch(e){return!1}}var flushing=!1;function flush(){if(flushing)return;flushing=!0;var q=loadQ();if(!q.length){flushing=!1;return}var rest=[];function done(){saveQ(rest);flushing=!1}var i=0;function step(){if(i>=q.length){done();return}var m=q[i++];var r=post(m);if(r&&r.then){r.then(function(ok){ok?0:rest.push(m);step()}).catch(function(){rest.push(m);step()})}else{r?0:rest.push(m);step()}}step()}function enqueue(msg){var q=loadQ();q.push(msg);saveQ(q);flush()}function regSW(){try{if(!navigator.serviceWorker)return;navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(r){var sw=r.active||r.waiting||r.installing;if(sw&&sw.state){if("activated"===sw.state)flush();else sw.addEventListener("statechange",function(){"activated"===sw.state&&flush()})}}).catch(function(){})}catch(e){}}navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("controllerchange",function(){setTimeout(flush,0)});
function sendHit(h){enqueue({kind:"SA_HIT",payload:h})}function patch(id,patchObj){enqueue({kind:"SA_HIT_PATCH",id:id,patch:patchObj||{}})}
function pv(){sess=gsess();var now=Date.now(),tzv=tz(),u=utm();hitId=rid(10)+"_"+now;sendHit({id:hitId,siteId:sid,type:"pageview",ts:now,url:w.location.href,title:d.title||"",referrer:d.referrer||"",visitorId:vid,sessionId:sess,durationMs:null,scrollMax:null,deviceType:dev(),browser:br(),os:os(),lang:navigator.language||"",tz:tzv,countryHint:reg(tzv),channel:chan(d.referrer||""),eventName:null,eventProps:null,utm_source:u.utm_source||null,utm_medium:u.utm_medium||null,utm_campaign:u.utm_campaign||null,utm_term:u.utm_term||null,utm_content:u.utm_content||null})}
function track(name,props){var now=Date.now(),tzv=tz();sendHit({id:rid(10)+"_"+now,siteId:sid,type:"event",ts:now,url:w.location.href,title:d.title||"",referrer:d.referrer||"",visitorId:vid,sessionId:gsess(),deviceType:dev(),browser:br(),os:os(),lang:navigator.language||"",tz:tzv,countryHint:reg(tzv),channel:chan(d.referrer||""),eventName:String(name||"event"),eventProps:props||null})}
function outbound(url){var now=Date.now(),tzv=tz();sendHit({id:rid(10)+"_"+now,siteId:sid,type:"outbound",ts:now,url:w.location.href,title:d.title||"",referrer:d.referrer||"",visitorId:vid,sessionId:gsess(),deviceType:dev(),browser:br(),os:os(),lang:navigator.language||"",tz:tzv,countryHint:reg(tzv),channel:chan(d.referrer||""),eventName:"outbound",eventProps:{to:url}})}
function onScroll(){var de=d.documentElement,stp=w.pageYOffset||de.scrollTop||0,h=de.scrollHeight-w.innerHeight,p=h>0?Math.min(100,Math.round(stp/h*100)):100;p>scrollMax&&(scrollMax=p)}function onEnd(){try{if(!hitId)return;var started=parseInt(hitId.split("_")[1]||String(Date.now()),10),dur=Date.now()-started;patch(hitId,{durationMs:dur,scrollMax:scrollMax})}catch(e){}}
function hookHistory(){try{var ps=history.pushState,rs=history.replaceState;history.pushState=function(){ps.apply(history,arguments);setTimeout(pv,0)};history.replaceState=function(){rs.apply(history,arguments);setTimeout(pv,0)};w.addEventListener("popstate",function(){setTimeout(pv,0)})}catch(e){}}function hookClicks(){d.addEventListener("click",function(e){try{var a=e.target&&e.target.closest?e.target.closest("a"):null;if(!a||!a.href)return;var u=new URL(a.href);u.host&&u.host!==w.location.host&&outbound(a.href)}catch(err){}},!0)}
(w.sa=w.sa||{}).track=track,w.sa.siteId=sid;regSW();hookHistory();hookClicks();w.addEventListener("scroll",onScroll,{passive:!0});w.addEventListener("visibilitychange",function(){"hidden"===d.visibilityState&&onEnd()});w.addEventListener("pagehide",onEnd);pv();}();
