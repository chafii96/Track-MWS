<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0b1020" />
    <title>Self Analytics Demo Page</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background:#0b1020; color:#e5e7eb; }
      header { padding: 28px 18px; background: linear-gradient(135deg, rgba(99,102,241,0.25), rgba(34,211,238,0.16)); border-bottom: 1px solid rgba(255,255,255,0.08); }
      main { padding: 18px; max-width: 900px; }
      .card { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 18px; padding: 14px; }
      button { background:#6366f1; border:none; color:#0b1020; font-weight:700; padding:10px 14px; border-radius: 999px; cursor:pointer; }
      button.secondary { background: rgba(255,255,255,0.08); color:#e5e7eb; border:1px solid rgba(255,255,255,0.12); }
      a { color:#22d3ee; }
      .grid { display:grid; grid-template-columns: 1fr; gap: 12px; }
      @media (min-width: 760px) { .grid { grid-template-columns: 1fr 1fr; } }
      .spacer { height: 1200px; background: radial-gradient(600px circle at 20% 20%, rgba(99,102,241,0.14), transparent 55%), radial-gradient(700px circle at 80% 30%, rgba(34,211,238,0.12), transparent 55%); border-radius: 24px; margin-top: 14px; }
      code, pre { background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.10); padding: 10px 12px; border-radius: 14px; display:block; overflow:auto; }
    </style>
  </head>
  <body>
    <header>
      <div style="max-width:900px;margin:0 auto;">
        <div style="font-size:18px;font-weight:800;">Demo tracked page</div>
        <div style="opacity:0.85;margin-top:6px;">Open with <code>?site=YOUR_SITE_ID</code> to generate pageviews + scroll depth.</div>
      </div>
    </header>
    <main>
      <div class="grid">
        <div class="card">
          <div style="font-weight:700;">Custom events</div>
          <div style="opacity:0.85;margin-top:6px;">Click buttons below to fire custom events.</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
            <button id="evt1">signup_click</button>
            <button id="evt2" class="secondary">file_download</button>
          </div>
        </div>
        <div class="card">
          <div style="font-weight:700;">Outbound click</div>
          <div style="opacity:0.85;margin-top:6px;">This link should be tracked as outbound.</div>
          <div style="margin-top:10px;"><a href="https://example.com" target="_blank" rel="noreferrer">https://example.com</a></div>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="card">
        <div style="font-weight:700;">Next step</div>
        <div style="opacity:0.85;margin-top:6px;">Go back to the dashboard and check Real-time + KPIs.</div>
        <pre>Dashboard: <a href="/">/</a>
Sites: <a href="/sites">/sites</a></pre>
      </div>
    </main>

    <script>
      (function () {
        var params = new URLSearchParams(location.search);
        var site = params.get('site') || '';
        if (!site) {
          console.warn('Missing ?site=SITE_ID');
          return;
        }
        var s = document.createElement('script');
        s.async = true;
        s.src = '/sa/insight.js?v=4';
        s.setAttribute('data-site', site);
        s.onload = function(){
          try {
            console.log('insight loaded', window.sa && window.sa.siteId);
            window.__sa_loaded = true;
          } catch(e) {}
        };
        s.onerror = function(){
          console.error('insight failed');
        };
        document.head.appendChild(s);

        function fire(name, props){
          try { window.sa && window.sa.track && window.sa.track(name, props); } catch(e) {}
        }
        document.getElementById('evt1').addEventListener('click', function(){ fire('signup_click', { plan: 'pro' }); });
        document.getElementById('evt2').addEventListener('click', function(){ fire('file_download', { file: 'pricing.pdf' }); });
      })();
    </script>
  </body>
</html>
